{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/hp/Desktop/MernStack-Tour-Management-main/MernStack-Tour-Management-main/tour-management/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/hp/Desktop/MernStack-Tour-Management-main/MernStack-Tour-Management-main/tour-management/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/hp/Desktop/MernStack-Tour-Management-main/MernStack-Tour-Management-main/tour-management/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/hp/Desktop/MernStack-Tour-Management-main/MernStack-Tour-Management-main/tour-management/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/hp/Desktop/MernStack-Tour-Management-main/MernStack-Tour-Management-main/tour-management/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState,useContext}from\"react\";import\"./booking.css\";import{Form,FormGroup,ListGroup,ListGroupItem,Button}from\"reactstrap\";import{useNavigate}from\"react-router-dom\";import{AuthContext}from\"../../context/AuthContext\";// import { BASE_URL } from \"../../utils/config\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Booking=function Booking(_ref){var tour=_ref.tour,avgRating=_ref.avgRating;var price=tour.price,reviews=tour.reviews,title=tour.title;var navigate=useNavigate();var BookTextRef=useRef(\"\");var _useContext=useContext(AuthContext),user=_useContext.user;var _useState=useState({userId:user&&user._id,userEmail:user&&user.email,tourName:title,fullName:'',phone:'',guestSize:1,bookAt:''}),_useState2=_slicedToArray(_useState,2),booking=_useState2[0],setBooking=_useState2[1];var handleChange=function handleChange(e){setBooking(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},e.target.id,e.target.value));});};var serviceFee=10;var totalAmount=Number(price)*Number(booking.guestSize)+Number(serviceFee);//send data to the server\nvar handleClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var BookText;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(!user||user===undefined||user===null)){_context.next=3;break;}return _context.abrupt(\"return\",alert(\"Please sign in\"));case 3:BookText=BookTextRef.current.value;if(!(BookText===\"\")){_context.next=6;break;}return _context.abrupt(\"return\",alert(\"Please fill all the required details !\"));case 6://  try {\n//   if(!user || user===undefined || user===null){\n//     return alert(\"Please sign in\")\n//   }\n//   const res = await fetch(`${BASE_URL}/booking`,{\n//     method: 'post',\n//     headers:{\n//       'content-type':'application/json'\n//     },\n//     body : JSON.stringify(booking)\n//   })\n//   const result = await res.json();\n//   if(!res.ok){\n//     return alert(result.message)\n//   }\nnavigate('/thank-you');// } catch (err) {\n//   alert(err.message)\n// }\n// console.log(booking);\ncase 7:case\"end\":return _context.stop();}},_callee);}));return function handleClick(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"booking\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"booking__top d-flex align-items-center justify-content-between\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"$\",price,\" \",/*#__PURE__*/_jsx(\"span\",{children:\"/per person\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"tour__rating d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"ri-star-fill\"}),avgRating===0?null:avgRating,\" (\",reviews===null||reviews===void 0?void 0:reviews.length,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"booking__form\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Information\"}),/*#__PURE__*/_jsxs(Form,{className:\"booking__info-form\",children:[/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"\",id:\"fullName\",placeholder:\"Full name\",required:true,onChange:handleChange,ref:BookTextRef})}),/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"\",id:\"phone\",placeholder:\"Phone Number\",required:true,onChange:handleChange,ref:BookTextRef})}),/*#__PURE__*/_jsxs(FormGroup,{className:\"d-flex align-items-center gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"\",id:\"bookAt\",placeholder:\"\",required:true,onChange:handleChange,ref:BookTextRef}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"\",id:\"guestSize\",placeholder:\"Guest\",required:true,onChange:handleChange,ref:BookTextRef})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"booking__bottom\",children:[/*#__PURE__*/_jsxs(ListGroup,{children:[/*#__PURE__*/_jsxs(ListGroupItem,{className:\"border-0 px-0\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"d-flex align-items-center gap-1\",children:[\"$\",price,\" \",/*#__PURE__*/_jsx(\"i\",{class:\"ri-close-line\"}),\" 1 person\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",price]})]}),/*#__PURE__*/_jsxs(ListGroupItem,{className:\"border-0 px-0\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Service Charge\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",serviceFee]})]}),/*#__PURE__*/_jsxs(ListGroupItem,{className:\"border-0 px-0 total\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",totalAmount]})]})]}),/*#__PURE__*/_jsx(Button,{className:\"btn primary__btn w-100 mt-4\",onClick:handleClick,children:\"Book Now\"})]})]});};export default Booking;","map":{"version":3,"names":["React","useRef","useState","useContext","Form","FormGroup","ListGroup","ListGroupItem","Button","useNavigate","AuthContext","Booking","tour","avgRating","price","reviews","title","navigate","BookTextRef","user","userId","_id","userEmail","email","tourName","fullName","phone","guestSize","bookAt","booking","setBooking","handleChange","e","prev","target","id","value","serviceFee","totalAmount","Number","handleClick","preventDefault","undefined","alert","BookText","current","length"],"sources":["C:/Users/hp/Desktop/MernStack-Tour-Management-main/MernStack-Tour-Management-main/tour-management/frontend/src/components/Booking/Booking.jsx"],"sourcesContent":["import React,{useRef,useState, useContext} from \"react\";\r\nimport \"./booking.css\";\r\nimport { Form, FormGroup, ListGroup, ListGroupItem, Button } from \"reactstrap\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\n// import { BASE_URL } from \"../../utils/config\";\r\n\r\nconst Booking = ({ tour, avgRating }) => {\r\n  const { price, reviews , title } = tour;\r\n  const navigate = useNavigate();\r\n  const BookTextRef = useRef(\"\");\r\n  \r\n  const {user} = useContext(AuthContext)\r\n\r\n  const [booking,setBooking]=useState({\r\n    userId: user && user._id,\r\n    userEmail:user && user.email,\r\n    tourName : title,\r\n    fullName:'',\r\n    phone:'',\r\n    guestSize:1,\r\n    bookAt:''\r\n\r\n  })\r\n  const handleChange =(e)=>{\r\n     setBooking(prev=>({...prev,[e.target.id]:e.target.value}))\r\n  };\r\n\r\n  const serviceFee=10\r\n  const totalAmount=Number(price)*Number(booking.guestSize) + Number(serviceFee)\r\n\r\n   //send data to the server\r\n   const handleClick=async (e)=>{\r\n    e.preventDefault();\r\n    if(!user || user===undefined || user===null){\r\n          return alert(\"Please sign in\")\r\n        }\r\n    const BookText = BookTextRef.current.value;\r\n    \r\n    if(BookText===\"\"){\r\n      return alert(\"Please fill all the required details !\");\r\n    }\r\n    //  try {\r\n    //   if(!user || user===undefined || user===null){\r\n    //     return alert(\"Please sign in\")\r\n    //   }\r\n\r\n    //   const res = await fetch(`${BASE_URL}/booking`,{\r\n    //     method: 'post',\r\n    //     headers:{\r\n    //       'content-type':'application/json'\r\n    //     },\r\n    //     body : JSON.stringify(booking)\r\n    //   })\r\n\r\n    //   const result = await res.json();\r\n    //   if(!res.ok){\r\n    //     return alert(result.message)\r\n    //   }\r\n    navigate('/thank-you');\r\n\r\n    // } catch (err) {\r\n    //   alert(err.message)\r\n    // }\r\n\r\n\r\n\r\n    // console.log(booking);\r\n\r\n   }\r\n\r\n\r\n  return (\r\n    <div className=\"booking\">\r\n      <div className=\"booking__top d-flex align-items-center justify-content-between\">\r\n        <h3>\r\n          ${price} <span>/per person</span>\r\n        </h3>\r\n        <span className=\"tour__rating d-flex align-items-center\">\r\n          <i\r\n            class=\"ri-star-fill\"\r\n           \r\n          ></i>\r\n\r\n          {avgRating === 0 ? null : avgRating} ({reviews?.length})\r\n          \r\n        </span>\r\n      </div>\r\n    \r\n    {/* ============== Booking Form =============== */}\r\n\r\n    <div className=\"booking__form\">\r\n        <h5>\r\n            Information\r\n        </h5>\r\n        <Form className=\"booking__info-form\">\r\n            <FormGroup>\r\n                <input type=\"text\" name=\"\" id=\"fullName\" placeholder=\"Full name\" required onChange={handleChange} ref={BookTextRef}/>\r\n            </FormGroup>\r\n            <FormGroup>\r\n                <input type=\"number\" name=\"\" id=\"phone\" placeholder=\"Phone Number\" required onChange={handleChange} ref={BookTextRef}/>\r\n            </FormGroup>\r\n            <FormGroup className=\"d-flex align-items-center gap-3\">\r\n                <input type=\"date\" name=\"\" id=\"bookAt\" placeholder=\"\" required onChange={handleChange} ref={BookTextRef}/>\r\n                <input type=\"number\" name=\"\" id=\"guestSize\" placeholder=\"Guest\" required onChange={handleChange} ref={BookTextRef}/>\r\n\r\n            </FormGroup>\r\n        </Form>\r\n    </div>\r\n    {/* ============== Booking Form End=============== */}\r\n\r\n\r\n\r\n{/* =========Booking bottom============ */}\r\n    <div className=\"booking__bottom\">\r\n        <ListGroup>\r\n            <ListGroupItem className=\"border-0 px-0\">\r\n               <h5 className=\"d-flex align-items-center gap-1\">${price} <i class=\"ri-close-line\"></i> 1 person</h5>\r\n               <span>${price}\r\n               </span>\r\n            </ListGroupItem>\r\n            <ListGroupItem className=\"border-0 px-0\">\r\n               <h5>Service Charge</h5>\r\n               <span>${serviceFee}\r\n               </span>\r\n            </ListGroupItem>\r\n            <ListGroupItem className=\"border-0 px-0 total\">\r\n               <h5>Total</h5>\r\n               <span>${totalAmount}\r\n               </span>\r\n            </ListGroupItem>\r\n        </ListGroup>\r\n\r\n        <Button className=\"btn primary__btn w-100 mt-4\" onClick={handleClick}>Book Now</Button>\r\n    </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Booking;\r\n"],"mappings":"i9BAAA,MAAOA,MAAK,EAAEC,MAAM,CAACC,QAAQ,CAAEC,UAAU,KAAO,OAAO,CACvD,MAAO,eAAe,CACtB,OAASC,IAAI,CAAEC,SAAS,CAAEC,SAAS,CAAEC,aAAa,CAAEC,MAAM,KAAQ,YAAY,CAC9E,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,WAAW,KAAQ,2BAA2B,CACvD;AAAA,wFAEA,GAAMC,QAAO,CAAG,QAAVA,QAAO,MAA4B,IAAtBC,KAAI,MAAJA,IAAI,CAAEC,SAAS,MAATA,SAAS,CAChC,GAAQC,MAAK,CAAsBF,IAAI,CAA/BE,KAAK,CAAEC,OAAO,CAAaH,IAAI,CAAxBG,OAAO,CAAGC,KAAK,CAAKJ,IAAI,CAAdI,KAAK,CAC9B,GAAMC,SAAQ,CAAGR,WAAW,EAAE,CAC9B,GAAMS,YAAW,CAAGjB,MAAM,CAAC,EAAE,CAAC,CAE9B,gBAAeE,UAAU,CAACO,WAAW,CAAC,CAA/BS,IAAI,aAAJA,IAAI,CAEX,cAA2BjB,QAAQ,CAAC,CAClCkB,MAAM,CAAED,IAAI,EAAIA,IAAI,CAACE,GAAG,CACxBC,SAAS,CAACH,IAAI,EAAIA,IAAI,CAACI,KAAK,CAC5BC,QAAQ,CAAGR,KAAK,CAChBS,QAAQ,CAAC,EAAE,CACXC,KAAK,CAAC,EAAE,CACRC,SAAS,CAAC,CAAC,CACXC,MAAM,CAAC,EAET,CAAC,CAAC,wCATKC,OAAO,eAACC,UAAU,eAUzB,GAAMC,aAAY,CAAE,QAAdA,aAAY,CAAGC,CAAC,CAAG,CACtBF,UAAU,CAAC,SAAAG,IAAI,wCAAOA,IAAI,wBAAED,CAAC,CAACE,MAAM,CAACC,EAAE,CAAEH,CAAC,CAACE,MAAM,CAACE,KAAK,IAAE,CAAC,CAC7D,CAAC,CAED,GAAMC,WAAU,CAAC,EAAE,CACnB,GAAMC,YAAW,CAACC,MAAM,CAACzB,KAAK,CAAC,CAACyB,MAAM,CAACV,OAAO,CAACF,SAAS,CAAC,CAAGY,MAAM,CAACF,UAAU,CAAC,CAE7E;AACA,GAAMG,YAAW,6FAAC,iBAAOR,CAAC,gIACzBA,CAAC,CAACS,cAAc,EAAE,CAAC,KAChB,CAACtB,IAAI,EAAIA,IAAI,GAAGuB,SAAS,EAAIvB,IAAI,GAAG,IAAI,0DAC9BwB,KAAK,CAAC,gBAAgB,CAAC,SAE9BC,QAAQ,CAAG1B,WAAW,CAAC2B,OAAO,CAACT,KAAK,MAEvCQ,QAAQ,GAAG,EAAE,0DACPD,KAAK,CAAC,wCAAwC,CAAC,SAExD;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA1B,QAAQ,CAAC,YAAY,CAAC,CAEtB;AACA;AACA;AAIA;AAAA,qDAEA,kBArCKuB,YAAW,6CAqChB,CAGF,mBACE,aAAK,SAAS,CAAC,SAAS,wBACtB,aAAK,SAAS,CAAC,gEAAgE,wBAC7E,sBAAI,GACD,CAAC1B,KAAK,CAAC,GAAC,oCAAM,aAAW,EAAO,GAC9B,cACL,cAAM,SAAS,CAAC,wCAAwC,wBACtD,UACE,KAAK,CAAC,cAAc,EAEjB,CAEJD,SAAS,GAAK,CAAC,CAAG,IAAI,CAAGA,SAAS,CAAC,IAAE,CAACE,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE+B,MAAM,CAAC,GAEzD,GAAO,GACH,cAIR,aAAK,SAAS,CAAC,eAAe,wBAC1B,oBAAI,aAEJ,EAAK,cACL,MAAC,IAAI,EAAC,SAAS,CAAC,oBAAoB,wBAChC,KAAC,SAAS,wBACN,cAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,UAAU,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ,MAAC,QAAQ,CAAEf,YAAa,CAAC,GAAG,CAAEb,WAAY,EAAE,EAC7G,cACZ,KAAC,SAAS,wBACN,cAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC,cAAc,CAAC,QAAQ,MAAC,QAAQ,CAAEa,YAAa,CAAC,GAAG,CAAEb,WAAY,EAAE,EAC/G,cACZ,MAAC,SAAS,EAAC,SAAS,CAAC,iCAAiC,wBAClD,cAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE,CAAC,QAAQ,MAAC,QAAQ,CAAEa,YAAa,CAAC,GAAG,CAAEb,WAAY,EAAE,cAC1G,cAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,WAAW,CAAC,WAAW,CAAC,OAAO,CAAC,QAAQ,MAAC,QAAQ,CAAEa,YAAa,CAAC,GAAG,CAAEb,WAAY,EAAE,GAE5G,GACT,GACL,cAMN,aAAK,SAAS,CAAC,iBAAiB,wBAC5B,MAAC,SAAS,yBACN,MAAC,aAAa,EAAC,SAAS,CAAC,eAAe,wBACrC,YAAI,SAAS,CAAC,iCAAiC,WAAC,GAAC,CAACJ,KAAK,CAAC,GAAC,wBAAG,KAAK,CAAC,eAAe,EAAK,YAAS,GAAK,cACpG,wBAAM,GAAC,CAACA,KAAK,GACN,GACM,cAChB,MAAC,aAAa,EAAC,SAAS,CAAC,eAAe,wBACrC,oBAAI,gBAAc,EAAK,cACvB,wBAAM,GAAC,CAACuB,UAAU,GACX,GACM,cAChB,MAAC,aAAa,EAAC,SAAS,CAAC,qBAAqB,wBAC3C,oBAAI,OAAK,EAAK,cACd,wBAAM,GAAC,CAACC,WAAW,GACZ,GACM,GACR,cAEZ,KAAC,MAAM,EAAC,SAAS,CAAC,6BAA6B,CAAC,OAAO,CAAEE,WAAY,UAAC,UAAQ,EAAS,GACrF,GACA,CAEV,CAAC,CAED,cAAe7B,QAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}